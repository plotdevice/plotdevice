<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>

  <title>PlotDevice Tutorials: Scripting</title>
  <link charset="utf-8" href="../etc/manual.css" rel="stylesheet" type="text/css"/>

</head><body>
  <div class="link" id="nav">
    <h1><a href="../manual.html">Plot Device <span>Tutorials</span></a></h1>

    <h3>Scripting</h3>

    <ul class="chapter">
      <li><a href="plotdevice.html">plotdevice →</a></li>
      <li>Chapter 18</li>
      <li><a href="Extending.html">← Extending</a></li>
    </ul>
  </div>

  <div class="article">
    <h3><a class="anchor" href="#using-plotdevice-as-a-module" id="using-plotdevice-as-a-module" name="using-plotdevice-as-a-module"></a>Using PlotDevice as a module in other scripts</h3>

    <p>Though the <a href="plotdevice.html"><code>plotdevice</code></a> command provides a
    convenient way to launch scripts with the PlotDevice interpreter, you may prefer to use the
    graphics context and export functions from within your own module (and running whichever
    <code>python</code> binary your system or virtualenv provides).</p>
    <p>Detailed installation instructions can be found in the project’s <code><a href="https://github.com/samizdatco/plotdevice-pyobjc/blob/master/README.md">README</a></code> file.
    To simplify the use of PlotDevice with other external libraries, we recommend installing the
    module into a <a href="http://virtualenv.org">virtualenv</a> along with your other
    dependencies:</p>
    <pre class="shell"><span class="kw">$ </span>virtualenv env
<span class="kw">$ </span>source ./env/bin/activate
<span class="o">(</span>env<span class="o">)</span><span class="kw">$ </span>pip install https://github.com/samizdatco/plotdevice-pyobjc/archive/master.zip
<span class="o">(</span>env<span class="o">)</span><span class="kw">$ </span>pip install requests envoy bs4 <span class="grey"># some other useful packages</span>
</pre>

    <h2><a href="#plotdevice.script" id="plotdevice.script" name="plotdevice.script"></a>Initializing a graphics context with
    <code>plotdevice.script</code></h2>

    <p>The <code>plotdevice.script</code> module initializes your script’s namespace with one
    identical to a script running with the app or command line tool. For instance, the following
    will draw a few boxes:</p>
    <pre class="shell"><span class="grey">#!/usr/bin/env python</span>
<span class="kw">from</span> <span class="nn">plotdevice.script</span> <span class="kw">import</span> <span class="o">*</span>
<span class="kw">for</span> <span class="kw">x</span><span class="s">,</span> <span class="kw">y</span> <span class="ow">in</span> <span class="kw">grid</span><span class="s">(</span><span class="mi">10</span><span class="s">,</span><span class="mi">10</span><span class="s">,</span><span class="mi">12</span><span class="s">,</span><span class="mi">12</span><span class="s">):</span>
    <span class="kw">rect</span><span class="s">(</span><span class="kw">x</span><span class="s">,</span><span class="kw">y</span><span class="s">,</span> <span class="mi">10</span><span class="s">,</span><span class="mi">10</span><span class="s">)</span>
</pre>

    <p>You can then generate output files using the global <code>canvas</code> object. Its
    <code>save</code> method takes a file path as an argument and the format will be determined by
    the file extension (<code>pdf</code>, <code>eps</code>, <code>png</code>, <code>jpg</code>,
    <code>gif</code>, or <code>tiff</code>):</p>
<pre>
<span class="nf">canvas</span><span class="o">.</span><span class="nf">save</span>(<span class="s">'~/Pictures/output.pdf'</span>)
</pre>

    <p>If you’re generating multiple images, be sure to reset the graphics state in between frames:</p>
<pre>
<span class="nf">canvas</span><span class="o">.</span>clear()
</pre>

    <p>But if you plan to do more than generate a one-off, you’ll likely find the <a href="../ref/Setup.html#export()"><code>export()</code></a> function more convenient. It provides
    convenience methods for writing images, vector documents, and even animations.</p>
  </div>

</body></html>