<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>

  <title>PlotDevice Tutorials: plotdevice</title>
  <link charset="utf-8" href="../etc/manual.css" rel="stylesheet" type="text/css"/>

</head><body>
  <div class="link" id="nav">
    <h1><a href="../manual.html">Plot Device <span>Tutorials</span></a></h1>

    <h3 class="tt">plotdevice</h3>

    <ul class="chapter">
      <li>Chapter 19</li>
      <li><a href="Scripting.html">← Scripting</a></li>
    </ul>
  </div>

  <div class="article">
    <h3><a class="anchor" href="#running-scripts" id="running-scripts" name="running-scripts"></a>Running scripts from the command line</h3>

    <p>The PlotDevice application can be controlled by an external command line tool called
    <code>plotdevice</code>. The command allows you to run scripts, coordinate with an external
    editor, and export images, movies, or animated gifs.</p>
    <h2>Installing the tool</h2>

    <p>To install the tool, open the Preferences window and click the Install button:</p>
    <p><img src="../etc/tut/plotdevice-tool-install.png"/></p>
    <p>Select from the menu of folders in your path and the application will create a symlink from
    there to the script contained in the app bundle. If admin privileges are required to make the
    symlink you will be prompted for your password.</p>
    <center>
      <img src="../etc/tut/plotdevice-tool-locate.png"/>
    </center>

    <p>After installation you should see the path to the tool and the port number it uses to
    communicate with the application. If this number is red (meaning something else is using that
    port), use the arrows to adjust it until you find an open channel.</p>
    <center>
      <img src="../etc/tut/plotdevice-tool-success.png"/>
    </center>

    <p>Note that since this connection involves a symlink, the <code>plotdevice</code> command will
    break if you move the application after installing the tool. If this happens, you will see an
    error message in the Preferences window and can reinstall the tool using the same procedure as
    before.</p>
    <h3><a class="anchor" href="#command-line-usage" id="command-line-usage" name="command-line-usage"></a>The <code>plotdevice</code> command</h3>

    <p>Once you have installed PlotDevice and added the <code>plotdevice</code> command to your
    shell’s <code>PATH</code>, it can be used to run scripts in a window or export graphics to file
    using one of the supported image/video formats.</p>
    <pre class="shell"><span class="kw">plotdevice</span> [<span class="red">-f</span>] [<span class="red">-b</span>] [<span class="red">--live</span>] [<span class="red">--virtualenv</span> PATH] [<span class="red">--args</span> [a [b ...]]]
        [<span class="red">--export</span> FILE] [<span class="red">--frames</span> N or M-N] [<span class="red">--fps</span> N] [<span class="red">--rate</span> N] [<span class="red">--loop</span> [N]] 
        file
</pre>

    <h2><a class="anchor" href="#runtime-arguments" id="runtime-arguments" name="runtime-arguments"></a>Runtime arguments</h2>

    <p><code class="box"><span class="red">-f</span></code> run full-screen<br/>
    <code class="box"><span class="red"><span class="red">--virtualenv</span></span> PATH</code>
    path to a virtualenv whose libraries you want to use (this should point to the top-level
    virtualenv directory)<br/>
    <code class="box"><span class="red">--args</span> [a [b ...]]</code> arguments to be passed to
    the script as sys.argv</p>
    <h2><a class="anchor" href="#external-editor-integration" id="external-editor-integration" name="external-editor-integration"></a>External editor integration</h2>

    <p><code class="box"><span class="red">-b</span></code> run PlotDevice in the background (i.e.,
    don’t switch apps when the script is run)<br/>
    <code class="box"><span class="red">--live</span></code> re-render graphics each time the file
    is saved</p>
    <h2><a class="anchor" href="#imageanimation-export" id="imageanimation-export" name="imageanimation-export"></a>Image/animation export</h2>

    <p><code class="box"><span class="red">--export</span> FILE</code> a destination filename
    ending in <code>pdf</code>, <code>eps</code>, <code>png</code>, <code>tiff</code>,
    <code>jpg</code>, <code>gif</code>, or <code>mov</code></p>
    <h2><a class="anchor" href="#animation-options" id="animation-options" name="animation-options"></a>Animation options</h2>

    <p><code class="box"><span class="red">--frames</span> N or M-N</code> number of frames to
    render or a range specifying the first and last frames (default <code>1-150</code>)<br/>
    <code class="box"><span class="red">--fps</span> N</code> frames per second in exported video
    (default <code>30</code>)<br/>
    <code class="box"><span class="red">--rate</span> N</code> video bitrate in megabits per second
    (default <code>1</code>)<br/>
    <code class="box"><span class="red">--loop</span> [N]</code> number of times to loop an
    exported animated gif (omit <code>N</code> to loop forever)</p>
    <h2><a class="anchor" href="#usage-examples" id="usage-examples" name="usage-examples"></a>Usage examples</h2>
    <pre class="shell"><span class="grey"># Run a script</span>
plotdevice script.py

<span class="grey"># Run fullscreen</span>
plotdevice -f script.py

<span class="grey"># Save script's output to pdf</span>
plotdevice script.py --export output.pdf

<span class="grey"># Create an animated gif that loops every 2 seconds</span>
plotdevice script.py --export output.gif --frames 60 --fps 30 --loop

<span class="grey"># Create a sequence of numbered png files – one for each frame in the animation</span>
plotdevice script.py --export output.png --frames 10

<span class="grey"># Create a 5 second long H.264 video at 2 megabits/sec</span>
plotdevice script.py --export output.mov --frames 150 --rate 2.0
</pre>
  </div>

</body></html>